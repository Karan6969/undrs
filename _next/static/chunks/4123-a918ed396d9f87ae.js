(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4123],{4123:function(e,t,s){Promise.resolve().then(s.bind(s,67814))},23533:function(e,t,s){"use strict";s.d(t,{O1:function(){return l},Qb:function(){return n},tg:function(){return i}});var a=s(44750),r=s.n(a);function l(e){let t=e||10,s="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=s.length,r="";for(let e=0;e<t;e++)r+=s.charAt(Math.floor(Math.random()*a));return r}function n(e,t){let s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,l=0,n=!1,i=e=>{console.log("停止",l),!e&&t&&t(),n=!0,clearTimeout(s)},o=async()=>{try{++l,await e(i)}catch(e){i(),console.error("轮询出错：",e)}if(l>=r&&i(),!n)return s=setTimeout(o,a)};return{start:async()=>{n=!1,await o()},stop:i}}function i(e){if(e){if(e.startsWith("https://")){let t=new XMLHttpRequest,s=new URL(window.location.href),a=function(e){let t=e.match(/(\.[a-zA-Z0-9]+)$/);return t?t[1]:null}(e);console.log("ext",a),s.pathname="/download"+new URL(e).pathname,t.open("get",s.toString(),!0),t.responseType="blob",t.send(),t.onload=function(e){let t=new FileReader;t.readAsDataURL(r()(e,"target.response")),t.onload=function(e){var t;let s=document.createElement("a");s.href=null===(t=e.target)||void 0===t?void 0:t.result,s.download=crypto.randomUUID()+a,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}}else{let t=document.createElement("a");t.href=e,t.download=crypto.randomUUID()+".jpeg",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}}},79461:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(57437),r=s(66296),l=s(30982),n=s(2265),i=s(5786);function o(e){let{variant:t,handleImage:s}=e,o=(0,l.useTranslations)("undress"),c=(0,n.useRef)(null),[d,u]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"mx-auto flex w-full max-w-sm flex-col items-center justify-center rounded-3xl bg-zinc-800 p-5",children:["full"===t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{className:"hidden sm:block",src:"/undress_icon/upload.svg",alt:"upload",width:100}),(0,a.jsx)("p",{className:"my-2 text-center text-lg font-bold lg:text-xl",children:o("Upload image to get started")})]}),(0,a.jsx)("p",{className:"mb-5 text-base lg:text-lg",children:o("Files supported: jpg png heic")}),(0,a.jsx)("input",{hidden:!0,accept:"image/*",type:"file",ref:c,onChange:e=>{var t;console.log("image upload");let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&(u(!0),(0,i.hv)(a,1024,1024,.92).then(e=>{u(!1),s(e)}))}}),(0,a.jsx)(r.A,{isLoading:d,className:"h-12 w-full bg-gradient-to-br from-[#c26ac0] to-[#6d2d84] text-medium font-semibold text-gray-200",onClick:()=>{let e=c.current;e&&e.click()},children:o("Select Image")}),(0,a.jsx)("p",{className:"mt-6 text-center text-sm text-white text-opacity-50 md:mt-8",children:o("All generated images are auto-deleted within 48 hours")})]})}},67814:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return K}});var a=s(57437),r=s(30982),l=s(20888),n=s(79461),i=s(15281),o=s(5786),c=s(93902),d=s(57525),u=s(66204),m=s(8286),h=s(14178),g=s(81527),x=s(22561),f=s(7725),p=s(2646),w=s(98111),v=s(51055),_=s(16089),b=s(88019),j=s(77599),N=s(66296),y=s(73031),E=s(66521),k=s(76132),P=s(58254),C=s(34782),I=s(16480),M=s.n(I),T=s(22236),D=s.n(T),R=s(98955),S=s(2265),A=s(59414),G=s(61975),U=s(37945),z=s(71399),L=s(21040),F=s(64833),Z=s.n(F),W=s(98811),H=s(74761),V=s(23533);function O(e){let{seconds:t}=e,s=(0,r.useTranslations)("undress"),[l,n]=(0,S.useState)(0);return(0,S.useEffect)(()=>{let e=0,a=setInterval(()=>{(e+=97.5/t)>130&&(A.default.error(s("Server is temporarily busy, please refresh and try again")),clearInterval(a)),n(e)},750);return()=>clearInterval(a)},[]),(0,a.jsx)(m.W,{"aria-label":"processing...",size:"lg",value:l,showValueLabel:!0,classNames:{indicator:"!bg-[#c26ac0]"}})}function B(e){return(0,a.jsx)(h.R,{isOpen:!0,closeButton:(0,a.jsx)(a.Fragment,{}),size:"lg",placement:"center",children:(0,a.jsx)(g.A,{children:t=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.k,{children:e.title}),(0,a.jsxs)(f.I,{children:[e.progress&&(0,a.jsx)(O,{seconds:30}),e.description&&(0,a.jsx)("p",{className:"mt-[20px] text-left text-white/95",children:e.description})]}),(0,a.jsxs)(p.R,{className:"flex flex-row py-8",children:[e.cancel&&(0,a.jsx)("button",{onClick:e.cancel_clicked,className:"text-nowrap rounded-2xl bg-zinc-200 p-4 text-center text-[16px] font-bold text-gray-800",children:e.cancel}),e.confirm&&(0,a.jsx)("button",{onClick:e.confirm_clicked,className:"w-full rounded-2xl  bg-theme p-4 text-center text-[16px] font-bold text-gray-100",children:e.confirm})]})]})})})}function K(e){let{undressModes:t,defaultMode:s}=e,m=(0,r.useFormatter)(),h=(0,S.useRef)(null),g=(0,S.useRef)(null),x=(0,r.useTranslations)("undress"),[f,p]=(0,l.v1)("mode",l.Oi.withDefault(s)),I=(0,i.useSetSinginModal)(),[T,F]=(0,S.useState)("masking"),{userInfo:O}=(0,i.useUserInfo)(),K=R.Z.get("guestId"),[Y,J]=(0,S.useState)(!1),q=null==O?void 0:O.isLogin,Q=null==O?void 0:O.userId,X=(0,u.tv)(),[$,ee]=(0,S.useState)(""),[et,es]=(0,S.useState)(!!R.Z.get("HD")),{gemData:ea,refreshGemData:er,privilege:el}=(0,c.ZP)(),[en,ei]=(0,S.useState)(null),[eo,ec]=(0,S.useState)(null),[ed,eu]=(0,S.useState)(null),[em,eh]=(0,S.useState)({boob_size:.5,pubic_hair:.5,body_shape:.5}),eg=(0,W.useMediaQuery)({maxWidth:767}),[ex,ef]=(0,S.useState)(!eg),[ep,ew]=(0,S.useState)(null),[ev,e_]=(0,S.useState)(!0);(0,S.useEffect)(()=>{if(!Q||!f.startsWith("video_")){e_(!1);return}e_(!0),d.Z.getVideoTasks(Q).then(e=>{if(e_(!1),0==e.length)return;let t=e[0];["CREATED","PROCESSING","COMPLETED"].includes(t.task_status)&&ew(t)})},[Q,f]),(0,S.useEffect)(()=>{if(!ep||"COMPLETED"===ep.task_status)return;let e=0,t=setInterval(()=>{if(e>=100){clearInterval(t);return}e++,d.Z.getVideoTask(ep.task_id).then(e=>{ew(e),"COMPLETED"===e.task_status&&clearInterval(t)})},4e4);return()=>clearInterval(t)},[ep]),(0,S.useEffect)(()=>{localStorage&&localStorage.getItem("uploadedImg")&&(ej(localStorage.getItem("uploadedImg")),localStorage.removeItem("uploadedImg"))},[ea]);let eb=(0,S.useCallback)(e=>ea.PG_GEM_EPHEMERAL+ea.PG_GEM_PERMANENT<10,[ea]),ej=e=>{ei(e),eu({title:x("masking_confirm_title"),description:x("masking_confirm_description"),confirm:x("masking_confirm_confirm"),confirm_clicked:async()=>{await ey(e)}})},eN=async()=>{var e;if(!q){A.default.error(x("Please login first")),setTimeout(()=>{I("sign-up",!1)},800);return}console.log("start undress image"),eu({title:x("undress_processing_title"),progress:!0});let s=new Image;s.src=en,await s.decode(),null===(e=g.current)||void 0===e||e.exportImage("png",{width:s.width,height:s.height}).then(e=>(console.log("export img"),(0,o.gF)(e))).then(e=>{d.Z.undressServiceApi.getUndressImg({uiid:D()(en).toString(),uid:Q,masks:e,original:en,operation:f.startsWith("video_")?f.replace("video_",""):f,breast_size:(em.boob_size-.5)*2,pubic_hair:(em.pubic_hair-.5)*2,body_size:(em.body_shape-.5)*2,product:"UT",image_format:"base64",prompt:$,watermark:el.level>=t[f].level?void 0:"ai1",quality:et?"high":"low"}).then(async e=>{if(6200===e.data.code)A.default.error(x("You are running out of gems! Purchase more!")),setTimeout(()=>{X.push("/pricing")},1500);else{if(f.startsWith("video_")){let t=await d.Z.createVideoTask({user:{user_id:Q},undress_task_id:D()(en).toString(),first_image_base64:e.data.data,task_type:"IMAGE_TO_VIDEO",prompt:"video_custom"===f?$:"a girl shakes her body up and down and her breast bounces"});if("FAILED"===t.task_status){A.default.error(x("You are running out of gems! Purchase more!")),setTimeout(()=>{X.push("/pricing")},1e3);return}ew(t),eu(null),er();return}ec("data:image/jpg;base64,"+e.data.data),er(),eu(null)}}).catch(e=>{eu(null),console.log(e),e.response&&408===e.response.status&&A.default.error(x("Server is temporarily busy, please refresh and try again"))})})},ey=async e=>{if(!q&&!K){A.default.error(x("Please login first")),setTimeout(()=>{eu(null),ei(null),I("sign-up",!1)},800);return}if(q&&ea.PG_GEM_EPHEMERAL+ea.PG_GEM_PERMANENT<10){A.default.error(x("You are running out of gems! Purchase more!")),setTimeout(()=>{X.push("/pricing")},1e3);return}if(eu({title:x("masking_processing_title"),progress:!0}),!Q&&K&&!await d.Z.verifyGuest(K)){eu(null),R.Z.remove("guestId"),A.default.error(x("Please login first")),setTimeout(()=>{I("sign-up",!1)},1e3);return}if(f.startsWith("video_")&&el.level<3){eu({title:x("Video generation requires an Artist plan or higher"),confirm:x("Upgrade"),confirm_clicked:async()=>{X.push("/pricing?utm_campaign=video_undress")},cancel:x("Cancel"),cancel_clicked:async()=>{eu(null)}});return}try{let t=await d.Z.automaskTask({task_id:D()(e).toString(),image_base64:e,user_id:Q||K,operation:f.startsWith("video_")?f.replace("video_",""):f,continent:R.Z.get("continent"),country:R.Z.get("country")}),s=t.error;if(s){eu(null),A.default.error(s);return}let a=t.mask_base64;if(a){let e=await (0,o.n4)(a,h.current.clientWidth,h.current.clientHeight,"#c26ac0");g.current.loadPaths(e),eu(null),F("undress"),J(!0),setTimeout(()=>{J(!1)},2e3)}else eu(null),ei(null)}catch(e){e.response&&408===e.response.status&&A.default.error(x("Server is temporarily busy, please refresh and try again"))}},[eE,ek]=(0,S.useState)(!0),[eP,eC]=(0,S.useState)(50),[eI,eM]=(0,S.useState)(50);return(0,a.jsxs)(a.Fragment,{children:[ep&&(0,a.jsx)("section",{className:"flex  w-screen flex-col items-center justify-center lg:flex-row lg:p-5",children:(0,a.jsxs)(w.w,{isFooterBlurred:!0,radius:"lg",className:"relative border-none",children:[(0,a.jsxs)(v.G,{className:"overflow-visible p-0",children:[["CREATED","PROCESSING"].includes(ep.task_status)&&(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,a.jsx)(_.J,{alt:"Woman listing to music",className:"max-w-md object-scale-down",src:ep.first_image_url,width:"100%"}),(0,a.jsx)(b.Z,{className:"absolute left-1/2 top-1/2 z-10 -translate-x-1/2 -translate-y-1/2 transform",label:"Video generation processing...",color:"default",size:"lg"})]}),"COMPLETED"===ep.task_status&&(0,a.jsx)(Z(),{url:ep.video_url,playing:!0,muted:!0,loop:!0,controls:!0,width:"360px",height:"240px"})]}),(0,a.jsxs)(j.i,{className:"mt-8 w-full flex-col items-center justify-center gap-1 overflow-hidden rounded-large border-1 border-white/20 py-1 shadow-small before:rounded-xl before:bg-white/10",children:["COMPLETED"!==ep.task_status&&(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-tiny text-white/80",children:[x("Position in queue"),": ",ep.tasks_in_queue]})}),(0,a.jsxs)("p",{className:"text-tiny text-white/80",children:[x("Video generation status"),": ",x(ep.task_status),"."," ","COMPLETED"!==ep.task_status?x("While the video is being generated, you can close this page and come back later to download the video"):""]}),(0,a.jsxs)("p",{className:"text-tiny text-white/80",children:[x("Created at"),":"," ",m.dateTime(new Date(ep.create_ts),{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})]}),"COMPLETED"===ep.task_status&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-tiny text-white/80",children:[x("Updated at"),":"," ",m.dateTime(new Date(ep.update_ts),{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-end gap-2",children:[(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(N.A,{className:"bg-black/20 text-sm text-white",variant:"flat",color:"default",radius:"lg",size:"md",onClick:()=>{d.Z.updateVideoTask(ep.task_id).then(()=>{ew(null),F("masking"),ei(null),ec(null)})},children:x("Upload New")})}),(0,a.jsx)(N.A,{className:"bg-black/20 text-sm text-white",variant:"flat",color:"default",radius:"lg",size:"md",onClick:()=>{d.Z.updateVideoTask(ep.task_id).then(()=>{(0,V.tg)(ep.video_url),ew(null),F("masking"),ei(null),ec(null)})},children:x("Download")})]})]})]})]})}),(!f.startsWith("video_")||!ev)&&!ep&&(0,a.jsxs)("section",{className:"flex min-h-svh w-screen flex-col lg:flex-row lg:p-5",children:[(0,a.jsxs)("div",{className:"lg:pb-18 relative flex h-full w-full  flex-col items-center gap-10 bg-[radial-gradient(#1E1E1E_1px,transparent_1px)] p-4 [background-size:16px_16px] md:pb-12 lg:border-r-1 lg:border-zinc-700",children:[!en&&!eo&&(0,a.jsxs)("div",{className:M()("relative mt-10 flex w-1/2 max-w-60 flex-col gap-2 rounded-xl bg-zinc-800 p-2 md:mt-28 md:p-5",{"w-auto max-w-none items-center justify-center":f.startsWith("video_")}),children:[f.startsWith("video_")?(0,a.jsx)(Z(),{url:"/undress_display/".concat(f,".mp4"),playing:!0,muted:!0,loop:!0,controls:!0,width:"360px",height:"240px"}):(0,a.jsx)(_.J,{src:"/undress_display/".concat(f,".jpg")}),(0,a.jsxs)("div",{className:M()("absolute -left-10 -top-10 z-10 flex flex-row gap-2 md:-top-20",{"-top-14 left-0":f.startsWith("video_")}),children:[(0,a.jsx)("img",{alt:"original",loading:"lazy",className:" rounded-xl",width:"100",height:"150",src:"/undress_display/".concat(s,"_original.jpg")}),(0,a.jsx)("div",{className:"mt-6 md:mt-16",children:(0,a.jsx)(U.zDV,{className:"h-6 w-6"})})]})]}),en&&(0,a.jsx)("div",{className:M()(" flex  w-full items-start justify-center",{hidden:eo}),children:(0,a.jsxs)("div",{className:"relative mx-10 flex max-w-md overflow-hidden md:mx-6",children:[(0,a.jsx)("img",{ref:h,src:en,className:"h-auto w-full max-w-md "}),(0,a.jsx)(H.x,{ref:g,className:M()("absolute left-0 top-0 w-full max-w-md opacity-50 ",{"cursor-[url('/undress_icon/brushcur.svg'),_pointer]":eE,"cursor-[url('/undress_icon/erasercur.svg'),_pointer]":!eE}),canvasColor:"transparent",strokeColor:"#c26ac0",strokeWidth:eP,eraserWidth:eI}),Y&&(0,a.jsx)("img",{src:"/undress_display/undressBrushLoading.gif",height:500,width:500,alt:"brush",className:"absolute z-[60] h-full w-[80%]"})]})}),eo&&(0,a.jsxs)("div",{className:"relative flex flex-row gap-4",children:[(0,a.jsxs)(w.w,{className:"absolute left-0 top-0 z-20 w-20 md:static",shadow:"sm",isPressable:!0,onPress:()=>{ec(null)},children:[(0,a.jsx)(y.u,{className:"justify-between text-small",children:(0,a.jsx)("p",{className:"text-default-500",children:x("Original")})}),(0,a.jsx)(v.G,{className:"overflow-visible p-0",children:(0,a.jsx)(_.J,{shadow:"sm",radius:"lg",width:"100%",alt:"original",className:"w-20",src:en})})]}),(0,a.jsxs)(w.w,{isFooterBlurred:!0,radius:"lg",className:"relative border-none",children:[(0,a.jsx)(_.J,{alt:"Woman listing to music",className:"max-w-md object-scale-down",src:eo,width:"100%"}),(0,a.jsxs)(j.i,{className:"absolute bottom-1 z-10 ml-1 w-[calc(100%_-_8px)] flex-col items-center justify-center gap-1 overflow-hidden rounded-large border-1 border-white/20 py-1 shadow-small before:rounded-xl before:bg-white/10",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-end gap-2",children:[el.level<t[f].level&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(N.A,{className:"bg-black/20 text-sm text-white",variant:"flat",color:"default",radius:"lg",size:"md",onClick:()=>{X.push("/pricing")},children:x("Remove watermark")})}),(0,a.jsx)(N.A,{className:"bg-black/20 text-sm text-white",variant:"flat",color:"default",radius:"lg",size:"md",onClick:()=>{(0,V.tg)(eo)},children:x("Download")})]}),el.level<t[f].level&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("p",{className:"text-tiny text-white/80",children:x("Upgrade to remove watermark")})})]})]})]})]}),(0,a.jsxs)("div",{className:"flex w-full shrink-0 select-none flex-col items-start gap-4 p-4 transition-all md:h-full md:min-w-[420px] lg:w-1/4",children:[(0,a.jsx)("p",{children:x("Choose Mode")}),"undress"===T&&(0,a.jsx)(N.A,{className:M()("relative flex min-h-16 flex-row gap-1 overflow-visible rounded-xl bg-zinc-800 px-2 py-1 text-center transition-all","border-medium border-gray-100 text-gray-100"),children:(0,a.jsx)("span",{className:"text-sm",children:x(t[f].content)})}),"masking"===T&&(0,a.jsx)(E.o,{orientation:"horizontal",className:M()("w-full py-2"),isEnabled:eg,children:(0,a.jsx)("div",{className:M()("grid w-[200%] grid-cols-9 gap-3 md:w-[99%] md:grid-cols-4"),children:Object.entries(t).map(e=>{let[t,s]=e;return(0,a.jsxs)(N.A,{className:M()("relative flex min-h-16 flex-row gap-1 overflow-visible rounded-xl bg-zinc-800 px-2 py-1 text-center transition-all",{"border-medium border-gray-100 text-gray-100":t===f,"opacity-70":t!==f}),onClick:()=>{p(t)},children:[(0,a.jsx)("span",{className:"text-sm",children:x(s.content)}),q&&eb(t)&&(0,a.jsx)(z.kUi,{height:15,width:11,className:"absolute -right-1 -top-1"})]},t)})})}),["custom","video_custom"].includes(f)&&(0,a.jsx)("div",{className:"mt-4 w-full max-w-md items-center justify-center gap-4",children:(0,a.jsx)(k.Y,{autoFocus:!0,isRequired:!0,label:"Prompts to Undress AI Model",type:"text",name:"prompt",onValueChange:ee})}),"masking"===T&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:x("Upload Photo")}),(0,a.jsx)(n.Z,{variant:"mini",handleImage:ej})]}),"undress"===T&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:x("Masking")}),(0,a.jsx)("div",{className:"grid w-full grid-cols-2 gap-4",children:["brush","eraser"].map(e=>(0,a.jsxs)("div",{className:"flex flex-row gap-2",onClick:()=>{var t;ek("brush"===e),null===(t=g.current)||void 0===t||t.eraseMode("eraser"===e)},children:["eraser"===e&&(0,a.jsx)(z.arg,{size:26,color:eE?"#666666":"#c26ac0"}),"brush"===e&&(0,a.jsx)(z.QrU,{size:26,color:eE?"#c26ac0":"#666666"}),(0,a.jsx)(P.L,{size:"md",step:20,color:"secondary",maxValue:100,minValue:20,value:"brush"===e?eP:eI,onChange:t=>{"brush"==e?eC(t):eM(t)},className:"max-w-md",classNames:{filler:"bg-[#c26ac0]",thumb:"bg-[#c26ac0]",track:"border-s-[#c26ac0]"}})]},e))}),"undress"===f&&ex&&(0,a.jsx)("div",{className:"w-full",children:Object.entries(em).map(e=>{let[t,s]=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:x(t)}),(0,a.jsx)("div",{className:"mb-4 mt-2 grid w-full grid-cols-3 gap-6",children:[0,.5,1].map(e=>(0,a.jsx)("div",{className:M()("max-w-24 overflow-hidden rounded-xl",{"border-medium border-gray-200":e===s}),onClick:()=>{eh(s=>{let a={...s};return a[t]=e,console.log(a),a})},children:(0,a.jsx)(_.J,{isZoomed:!0,radius:"none",className:M()("w-full"),alt:t+e,src:"/undress_display/".concat(t,"_").concat(e,".jpg")})},e))})]})})}),(0,a.jsxs)("div",{className:"flex w-full max-w-sm flex-col  justify-center gap-4 rounded-3xl bg-zinc-800 p-5",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)(C.i,{isSelected:et,onValueChange:e=>{if(e&&el.level<1){eu({title:x("HD mode requires a Pro level plan or higher"),confirm:x("Upgrade to HD"),confirm_clicked:async()=>{X.push("/pricing")},cancel:x("Cancel"),cancel_clicked:async()=>{es(!1),R.Z.remove("HD"),eu(null)}});return}es(e),R.Z.set("HD","HD",{expires:30})},classNames:{wrapper:"group-data-[selected=true]:bg-theme"},size:"lg",color:"success",startContent:(0,a.jsx)(G.vrV,{color:"white"}),endContent:(0,a.jsx)(L.sQZ,{}),children:x("HD mode")}),"undress"===f&&(0,a.jsx)(C.i,{isSelected:ex,onValueChange:e=>{ef(e)},className:"md:hidden",classNames:{wrapper:"group-data-[selected=true]:bg-theme"},size:"lg",color:"success",children:x("Advanced settings")})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[eo?(0,a.jsx)(N.A,{className:"col-span-2 h-12 w-full bg-gradient-to-br from-[#c26ac0] to-[#6d2d84] text-medium font-semibold text-gray-200",onClick:()=>{ec(null)},children:x("Back to original")}):(0,a.jsx)(N.A,{className:"col-span-2 h-12 w-full bg-gradient-to-br from-[#c26ac0] to-[#6d2d84] text-medium font-semibold text-gray-200",onClick:()=>{eN()},children:x(t[f].content)}),(0,a.jsx)(N.A,{className:"h-12 w-full bg-gray-100 text-medium text-gray-900",onClick:()=>{F("masking"),ei(null),ec(null)},children:x("Upload New")})]}),(0,a.jsxs)("p",{className:"text-sm text-white text-opacity-50",children:[f.startsWith("video_")&&x("Video generation mode cost: 200 gems"),!f.startsWith("video_")&&(et?x("HD mode cost: 75 gems"):x("Undress mode cost: 50 gems"))]}),(0,a.jsx)("p",{className:"text-sm text-white text-opacity-50 ",children:x("All generated images are auto-deleted within 48 hours")})]})]})]}),ed&&(0,a.jsx)(B,{...ed})]})]})}},5786:function(e,t,s){"use strict";function a(e,t,s,a){return new Promise((r,l)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=e=>{var l;let n=new Image;n.src=null===(l=e.target)||void 0===l?void 0:l.result,n.onload=()=>{let e=document.createElement("canvas"),l=e.getContext("2d"),i=n.width,o=n.height;i>o?i>t&&(o*=t/i,i=t):o>s&&(i*=s/o,o=s),e.width=i,e.height=o,l.drawImage(n,0,0,i,o),r(e.toDataURL("image/jpeg",a))}}})}async function r(e){let t=new Image;t.src=e,await t.decode();var s=document.createElement("canvas"),a=s.getContext("2d");s.width=t.width,s.height=t.height,a.drawImage(t,0,0);var r=a.getImageData(0,0,t.width,t.height);let l=r.data;for(let e=0;e<l.length;e+=4)0==l[e+3]?(l[e]=0,l[e+1]=0,l[e+2]=0):(l[e]=255,l[e+1]=255,l[e+2]=255),l[e+3]=255;return a.putImageData(r,0,0),s.toDataURL("image/png")}async function l(e,t,s,a){let r=new Image;r.src="data:image/jpg;base64,"+e,await r.decode();var l=document.createElement("canvas"),n=l.getContext("2d");l.width=t;let i=Math.max(Math.ceil(t/50),1);l.height=s,n.drawImage(r,0,0,t,s);let o=n.getImageData(0,0,t,s).data,c=[];for(let e=0;e<s;e++){let s=t,r=0;for(let l=0;l<t;l++){let n=(e*t+l)*4;o[n]>125&&o[n+1]>125&&o[n+2]>125?(s=Math.min(s,l),r=Math.max(r,l)):(r-s>i&&c.push({paths:[{x:s,y:e},{x:r,y:e}],strokeWidth:1,strokeColor:a,drawMode:!0}),s=t,r=0)}r-s>i&&c.push({paths:[{x:s,y:e},{x:r,y:e}],strokeWidth:1,strokeColor:a,drawMode:!0})}return c}s.d(t,{gF:function(){return r},hv:function(){return a},n4:function(){return l}})},93902:function(e,t,s){"use strict";s.d(t,{FD:function(){return c},ZP:function(){return d}});var a=s(2265),r=s(32153),l=s(15281),n=s(57525);let i=(0,r.cn)({key:"gemscount",default:{PG_GEM_EPHEMERAL:0,PG_GEM_PERMANENT:0}}),o=(0,r.cn)({key:"privilege",default:{last_purchase_amount:0,level:0,level_name:"basic",user_id:void 0}});function c(){let[e,t]=(0,r.FV)(i),[s,c]=(0,r.FV)(o),{userInfo:d}=(0,l.useUserInfo)();return(0,a.useEffect)(()=>{if(!d||!d.userId)return;let e=!1;return n.Z.checkUserGem(d.userId).then(e=>{t({PG_GEM_EPHEMERAL:e.PG_GEM_EPHEMERAL||0,PG_GEM_PERMANENT:e.PG_GEM_PERMANENT||0})}),n.Z.getUserInfo(d.userId).then(t=>{let s="basic",a=0;t.last_purchase_amount>20&&(s="advanced",a=1),t.last_purchase_amount>40&&(s="master",a=2),t.last_purchase_amount>60&&(s="artist",a=3),t.last_purchase_amount>130&&(s="ultimate",a=4),e||c({last_purchase_amount:t.last_purchase_amount,level:a,level_name:s,user_id:t.user_id})}),()=>{e=!0}},[d]),{gemData:e}}function d(){let[e,t]=(0,r.FV)(i),[s,c]=(0,r.FV)(o),{userInfo:d}=(0,l.useUserInfo)();return{gemData:e,refreshGemData:(0,a.useCallback)(()=>{d&&d.userId&&n.Z.checkUserGem(d.userId).then(e=>{t({PG_GEM_EPHEMERAL:e.PG_GEM_EPHEMERAL||0,PG_GEM_PERMANENT:e.PG_GEM_PERMANENT||0})})},[t,d]),privilege:s}}},66204:function(e,t,s){"use strict";s.d(t,{Mj:function(){return l},QT:function(){return n},jD:function(){return d},rU:function(){return o},tv:function(){return u}});var a=s(80654),r=s(39279);let l={en:"GB",ar:"AE",bg:"BG",de:"DE","es-ES":"ES",et:"ee",fr:"FR",fi:"FI",ko:"KR","sv-SE":"SE",id:"ID",it:"IT",el:"GR",cs:"CZ",hu:"HU",lt:"LT",lv:"LV",no:"NO",ja:"JP",nl:"NL",pl:"PL",is:"IS","pt-PT":"PT",ru:"RU",tr:"TR",he:"IL",ro:"RO",sk:"SK",sl:"SI",da:"DK",uk:"UA",th:"TH",hi:"IN","ml-IN":"MY",vi:"VN","zh-CN":"CN","zh-TW":"TW"},n=["USD","AED","ARS","AUD","BGN","BRL","BZD","CAD","CHF","CNY","CZK","DKK","EUR","GBP","HKD","HUF","IDR","INR","JPY","KRW","MXN","NOK","PLN","RON","RUB","SEK","SGD","THB","TRY","TWD","UAH"],i=(0,r.R)({locales:Object.keys(l),defaultLocale:"en",localePrefix:"as-needed"}),{Link:o,redirect:c,usePathname:d,useRouter:u}=(0,a.iV)(i)}}]);