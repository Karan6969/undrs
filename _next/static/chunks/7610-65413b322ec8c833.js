(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7610],{42480:function(){},15281:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C},signinFormReload:function(){return T},signinFormState:function(){return E},useSetSinginModal:function(){return O},useUserInfo:function(){return G},userInfoState:function(){return U}});var s=a(57437),r=a(26142),n=a(92730);let i=(0,r.ZF)({appId:"1:786150664182:web:f2c1c95933d234095a09d7",apiKey:"AIzaSyD_omM03MyUQdBNAQ3lW0RzjRS5x29GDnM",authDomain:"aiedit-app.firebaseapp.com",projectId:"aiedit-app"}),o=(0,n.v0)(i),c=(0,r.ZF)({appId:"1:813990637926:web:0863997f9168b05295d8a7",apiKey:"AIzaSyCwurIwyL7CypcjldPagGelFXLp__DW6BY",authDomain:"aipic-app.firebaseapp.com",projectId:"aipic-app"},"gg");var l=a(98955),u=()=>{let e={};for(let t of["utm_source","utm_medium","utm_campaign","utm_content"]){let a=l.Z.get(t);a&&(e[t]=a)}return e},m=a(57525),d=a(14178),p=a(81527),h=a(22561),f=a(7725),w=a(76132),g=a(12416),y=a(32117),x=a(66296),k=a(5187),b=a(66364),_=a(16480),j=a.n(_),v=a(22236),S=a.n(v),N=a(30982),Z=a(2265),I=a(59414),A=a(71399),P=a(45481),z=a(32153);let E=(0,z.cn)({key:"signinFormState",default:null}),T=(0,z.cn)({key:"signinFormReload",default:!1}),U=(0,z.cn)({key:"userInfoState",default:l.Z.get("userInfo")?JSON.parse(l.Z.get("userInfo")):null});function G(){let[e,t]=(0,z.FV)(U),a=e=>{e?(e.isLogin=!0,l.Z.set("userInfo",JSON.stringify(e),{expires:90}),t(e)):(l.Z.remove("userInfo"),t(null))},s=async e=>{await (0,n.w7)(o),await m.Z.deleteUser(e),window.location.href="/",a(null)};return{userInfo:e,setUserInfo:a,logout:()=>{(0,n.w7)(o).then(()=>{window.location.href="/",a(null)})},deleteAccount:s}}function O(){let e=(0,z.Zl)(E),t=(0,z.Zl)(T);return(a,s)=>{e(a),t(s)}}function C(){let e=(0,N.useTranslations)("auth"),[t,a]=(0,Z.useState)(!1),[r,i]=(0,z.FV)(E),[l,_]=(0,z.FV)(T),[v,U]=(0,Z.useState)(!1),[O,C]=(0,Z.useState)(""),[F,R]=(0,Z.useState)(""),{setUserInfo:D}=G(),M=()=>a(!t),J=u(),L=Object.keys(J).length>0?J:void 0,V=e=>e.match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}$/i),q=(0,Z.useMemo)(()=>""!==O&&!V(O),[O]),$=e=>e.match(/^(?=.*[A-Za-z])(?=.*\d).{8,}$/i),B=(0,Z.useMemo)(()=>""!==F&&!$(F),[F]);async function K(t){if(t.preventDefault(),O&&F){U(!0);try{let e="login"===r?n.e5:n.Xb,t=(await e(o,O,F)).user,a=await (0,b.$)(),s=await m.Z.createUser({firebase_id:t.uid,email:t.email,product_enum:"UT",browser_fingerprint:a+"_"+S()(t.uid+a).toString(),metadata:L});if(s.error)I.default.error(s.message);else{if(console.log(s),D({userId:s.user_id,userEmail:s.email}),l){location.reload();return}i(null)}}catch(a){let t=a.code;console.log(t,a.message),"auth/invalid-credential"===t?I.default.error(e("Email or password is incorrect")):"auth/email-already-in-use"===t?I.default.error(e("Email already in use")):I.default.error(t)}U(!1)}}async function W(e,t){U(!0);let a=(0,n.v0)(c);try{let s=await (0,n.rh)(a,e),r=t.credentialFromResult(s);null==r||r.accessToken;let o=s.user;console.log(s);let c=await (0,b.$)(),u=await m.Z.createUser({firebase_id:o.uid,email:o.email,product_enum:"UT",browser_fingerprint:c+"_"+S()(o.uid+c).toString(),metadata:{...L,third_party_login:"GOOGLE"}});if(u.error)I.default.error(u.message);else{if(console.log(u),D({userId:u.user_id,userEmail:u.email}),l){location.reload();return}i(null)}}catch(e){console.log(e)}U(!1)}async function X(t){t.preventDefault(),O&&(U(!0),await (0,n.LS)(o,O),I.default.success(e("A password reset email has been sent to, if it exists in our system",{email:O})),U(!1))}return(0,s.jsx)(d.R,{isOpen:!!r,isDismissable:!1,isKeyboardDismissDisabled:!0,onOpenChange:e=>{e||i(null)},placement:"center",backdrop:"blur",shadow:"sm",children:(0,s.jsx)(p.A,{children:a=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.k,{className:"flex flex-col gap-1",children:e(r)}),(0,s.jsx)(f.I,{children:(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsxs)("div",{className:"flex w-full max-w-sm flex-col gap-4 px-8 pb-10 pt-6",children:[(0,s.jsxs)("form",{className:j()("flex flex-col gap-3",{"pointer-events-none":v}),onSubmit:"reset-password"===r?X:K,children:[(0,s.jsx)(w.Y,{label:e("Email"),name:"email",placeholder:e("Enter email"),type:"email",variant:"bordered",autoComplete:"email",isInvalid:q,errorMessage:q&&e("Please enter a valid email"),onValueChange:C,value:O,isRequired:!0,autoFocus:!0}),"reset-password"!==r&&(0,s.jsx)(w.Y,{endContent:(0,s.jsx)("button",{type:"button",onClick:M,children:t?(0,s.jsx)(A.dSq,{className:"pointer-events-none text-2xl text-default-400"}):(0,s.jsx)(A.tgn,{className:"pointer-events-none text-2xl text-default-400"})}),label:e("Password"),name:"password",autoComplete:"login"===r?"current-password":"new-password",onValueChange:R,value:F,placeholder:e("Enter password"),type:t?"text":"password",isInvalid:"sign-up"===r&&B,errorMessage:"sign-up"===r&&B&&e("Please create a password that is at least 8 characters long and includes at least one letter and one number"),variant:"bordered",isRequired:!0}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-1 py-2 text-sm",children:["sign-up"===r&&(0,s.jsx)(g.K,{name:"remember",size:"sm",defaultSelected:!0,isRequired:!0,children:e("I am over 18 years old")}),"login"===r&&(0,s.jsx)(y.O,{className:"cursor-pointer text-default-500",size:"sm",onPress:()=>{i("reset-password")},children:e("forgot password?")})]}),"reset-password"===r&&(0,s.jsx)("p",{className:"w-full text-center text-sm",children:e("We will send you an email to reset your password")}),(0,s.jsx)(x.A,{color:"primary",type:"submit",className:"bg-theme",isLoading:v,children:e(r)})]}),"reset-password"!==r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 py-2",children:[(0,s.jsx)(k.j,{className:"flex-1"}),(0,s.jsx)("p",{className:"shrink-0 text-tiny text-default-500",children:"OR"}),(0,s.jsx)(k.j,{className:"flex-1"})]}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsx)(x.A,{startContent:(0,s.jsx)(P.JM8,{width:24}),variant:"bordered",onPress:async()=>{await W(new n.hJ,n.hJ)},children:e("Continue with Google")})})]}),(0,s.jsxs)("p",{className:"text-center text-small",children:["sign-up"===r?e("Already have an account?"):e("Need an account?"),"\xa0",(0,s.jsx)(y.O,{size:"sm",onPress:()=>i("sign-up"===r?"login":"sign-up"),className:"cursor-pointer text-blue-500",children:"sign-up"===r?e("login"):e("sign-up")})]})]})})})]})})})}},57525:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var s=a(66364),r=a(7908),n=a(59414);let i=r.Z.create({baseURL:"https://igv2.undressai.tools",timeout:9e4});i.defaults.headers.common.Authorization="Basic cG9ybmdlbjpwb3JuZ2Vu",r.Z.defaults.headers.common["X-Client"]="fantasy-new",i.defaults.headers.post["Content-Type"]="application/json",i.interceptors.request.use(e=>e,async e=>await Promise.reject(e));let o=(e,t)=>{400===e?n.default.error(t):n.default.error("".concat(e,": ").concat(t))};i.interceptors.response.use(async e=>200===e.status?e:await Promise.reject(e),async e=>(o(e.response.status,e.response.data.message),await Promise.reject(e)));let c=async(e,t)=>await i.post(e,t),l=async(e,t)=>{let a=c(e,t).then(e=>e.data).catch(e=>e);return await a},u={Authorization:"Basic cG9ybmdlbjpwb3JuZ2Vu","Content-Type":"application/json"};var m={checkUserGem:e=>r.Z.get("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/balance"),{headers:u,params:{user_id:e}}).then(e=>e.data.reduce((e,t)=>(e[t.currency]=t.amount,e),{})).catch(e=>{if(e.response&&(404===e.response.status||500===e.response.status))return{PG_GEM_EPHEMERAL:0,PG_GEM_PERMANENT:0};throw e}),automaskTask:async e=>(await fetch("".concat("https://mkv2.undressai.tools","/mask"),{method:"POST",headers:u,body:JSON.stringify(e)})).json(),createVideoTask:async e=>(await fetch("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/video_task"),{method:"POST",headers:u,body:JSON.stringify(e)})).json(),getVideoTasks:e=>r.Z.get("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/video_task"),{headers:u,params:{user_id:e}}).then(e=>e.data),getVideoTask:async e=>(await fetch("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/video_task/").concat(e),{method:"GET",headers:u})).json(),updateVideoTask:async e=>(await fetch("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/video_task/").concat(e),{method:"PUT",headers:u,body:JSON.stringify({task_status:"DOWNLOADED"})})).json(),getUserInfo:e=>r.Z.get("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/users"),{headers:u,params:{user_id:e}}).then(e=>e.data),deleteUser:e=>r.Z.delete("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/users"),{headers:u,params:{user_id:e}}).then(e=>e.data),getExistingUser:e=>r.Z.get("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/users"),{headers:u,params:{email:e.toLowerCase(),product_enum:"UT"}}).then(e=>e.data).catch(e=>{if(e.response&&404===e.response.status)return!1;throw e}),feeDeduction:e=>r.Z.patch("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/balance"),e,{headers:u}),checkUserSubscriptionStatus:e=>r.Z.get("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/subscriptions/UT"),{headers:u,params:{user_id:e}}),getProductPrices:async()=>{let e=await fetch("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/pricing/UT"),{headers:u,next:{revalidate:6e3}});try{return await e.json()}catch(e){console.log(e)}},createUser:async e=>{let t=await fetch("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/users"),{method:"POST",headers:u,body:JSON.stringify({user:e})});return await t.json()},verifyGuest:async e=>{try{let t=await fetch("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/guest?")+new URLSearchParams({guest_id:e}).toString(),{method:"GET",headers:u});return await t.text(),!0}catch(e){return!1}},createGuest:async()=>{let e=await (0,s.$)(),t=await fetch("".concat("https://kkz3mmrmm6.us-east-1.awsapprunner.com","/guest?fingerprint=").concat(e),{method:"GET",headers:u});return await t.text()},hentaiServiceApi:{fetch:l},undressServiceApi:{getAutoMask:async e=>await i.post("/undress_get_automask",e),getUndressImg:async e=>await i.post("/undress_get_resuls",e)},FaceSwapServiceApi:{getFaceSwapImg:async e=>await i.post("/face_swap",e)},AnimateStyleServiceApi:{getAnimateStyleImg:async e=>await i.post("/animate_style",e)},submitPornGenJob:e=>r.Z.post("".concat("https://ctv2.undressai.tools","/submit_porngen_job"),e),checkPornGenJob:e=>r.Z.post("".concat("https://ctv2.undressai.tools","/check_porngen_job"),e),hentaiFetcher:l,HENTAI_API_URL:"https://igv2.undressai.tools/hentai_sd_task",getInviteCode:async e=>await i.put("/invite_code",{param:e})}}}]);