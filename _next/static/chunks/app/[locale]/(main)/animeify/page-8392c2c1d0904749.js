(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[825],{79965:function(e,t,l){Promise.resolve().then(l.bind(l,84871))},84871:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return C}});var s=l(57437),a=l(93902),n=l(57525),i=l(64840),r=l(75527),c=l(66296),d=l(14178),o=l(81527),u=l(22561),m=l(84173),h=l(7725),x=l(2646),f=l(43308),p=l(30982),g=l(20703),A=l(47907),b=l(2265),w=l(59414),j=l(98811),y=l(15281),v=l(23533),N={src:"/_next/static/media/basic.06d31b62.webp",height:680,width:680,blurDataURL:"data:image/webp;base64,UklGRl4AAABXRUJQVlA4IFIAAADwAQCdASoIAAgAAkA4JZgCdH8AFcQfqbgA4nni2ojcmCtb9OcmxyBkeu1E+9PWommzel05nH4NK/7utW6rRaP8zC/JMJWmV4T0TQMCh89iIAAA",blurWidth:8,blurHeight:8},_={src:"/_next/static/media/detailed.87cabb2f.webp",height:680,width:680,blurDataURL:"data:image/webp;base64,UklGRmIAAABXRUJQVlA4IFYAAABwAgCdASoIAAgAAkA4JYgCdH8AgnytdVtLVQ8AAP5haDeF+lNBrNAe3sLABFys3srPh6ff31A7sCSN4G5ONcG1Ik+3AZWG4L4td2XZOSkYtPz1DAAAAA==",blurWidth:8,blurHeight:8},E={src:"/_next/static/media/hd.1b537b7a.webp",height:680,width:680,blurDataURL:"data:image/webp;base64,UklGRmQAAABXRUJQVlA4IFgAAACwAQCdASoIAAgAAkA4JQBOgB5vdXgAAM4yk3zJ9M1nm935jcImT7513XydOjB8s4UGx+etbwZDXEttbFUxTv50oxkYKjwb3FW7EWdGlURj890vkvfnmMAA",blurWidth:8,blurHeight:8},P={src:"/_next/static/media/realistic.dc0a40b2.webp",height:680,width:680,blurDataURL:"data:image/webp;base64,UklGRloAAABXRUJQVlA4IE4AAADQAQCdASoIAAgAAkA4JYgCdAD0VQ1joADb0flFCu+n7L8tVEy8UAWzP2On8qSnlhWyrfiwJDkjOHjqttiOza4t896vUVYRa/1fjMYgAAA=",blurWidth:8,blurHeight:8},R={src:"/_next/static/media/resultimg.32912bc7.svg",height:64,width:64,blurWidth:0,blurHeight:0},k={src:"/_next/static/media/uploadimg.ee1b8cd3.svg",height:64,width:64,blurWidth:0,blurHeight:0},C=()=>{let[e,t]=(0,b.useState)(null),[l,C]=(0,b.useState)(null),[G,U]=(0,b.useState)(!1),[M,I]=(0,b.useState)(null),[O,S]=(0,b.useState)(!1),[D,F]=(0,b.useState)(0),H=(0,p.useTranslations)("faceswap"),{isOpen:W,onOpen:L,onOpenChange:Q}=(0,r.q)(),[T,B]=(0,b.useState)(""),[V,J]=(0,b.useState)(""),{refreshGemData:Z}=(0,a.ZP)(),{userInfo:z}=(0,y.useUserInfo)(),X=!1,Y="None";z&&z.userId&&(X=!!z.isLogin,Y=z.userId);let q=(0,A.useRouter)(),K=(0,j.useMediaQuery)({maxWidth:767}),{isOpen:$,onOpen:ee,onOpenChange:et}=(0,r.q)(),{isOpen:el,onOpen:es,onOpenChange:ea}=(0,r.q)(),[en,ei]=(0,b.useState)(!1),er=(0,b.useCallback)(e=>{ei(e)},[]),ec=e=>{if(D<1){w.default.error("Please upload original image first!");return}I(e),D<2&&F(2)},ed=async()=>{if(D<2){w.default.error("Please select a model first!");return}e&&M&&(ei(!0),S(!1),F(2),await n.Z.AnimateStyleServiceApi.getAnimateStyleImg({uiid:(0,f.x0)(),uid:Y,type:"base64",data:e,model:M,product:"UT"}).then(async e=>{console.log(e),6200===e.data.code?(w.default.error(H("You are running out of gems! Purchase more!")),B(H("You are running out of gems! Purchase more!")),J("/pricing?utm_content=animate_style"),L()):6100===e.data.code?(w.default.success("Success"),Z(),e.data.data&&C(e.data.data),S(!0),ee(),F(3)):w.default.error("Please Try Again")}).catch(e=>{w.default.error("Please Try Again"),console.log("err",e)}).finally(()=>{ei(!1)}))},eo=()=>{(0,v.tg)(l)};return(0,s.jsxs)("div",{className:" mx-auto min-h-[calc(100vh-132px)] w-full max-w-7xl px-6 pt-6 lg:px-10",children:[(0,s.jsx)("div",{className:"flex h-full w-full flex-col",children:(0,s.jsxs)("div",{className:"mb-10 flex w-full flex-1 flex-col gap-6 sm:flex-row sm:gap-4 lg:gap-6",children:[(0,s.jsx)("div",{className:"flex h-auto w-full flex-col",children:(0,s.jsxs)("div",{className:"relative mb-[20px] h-full min-h-[300px] w-full rounded-xl border-1 sm:h-[400px] ",children:[G&&(0,s.jsx)(g.default,{src:e||"",height:400,width:300,alt:"",className:"absolute left-0 top-0 flex h-full w-full flex-col items-center justify-center object-contain"}),(0,s.jsxs)("div",{onClick:()=>{if(!X){B("Please Sign in!"),J("/auth?prev_url=/animeify"),L();return}w.default.loading("Uploading..."),(0,i.b7)(async(e,l)=>{null==e&&w.default.error("dataurl is null"),"string"==typeof e&&(t(e),w.default.success("Upload Successed"),U(!0),D<1&&F(1))},er,.7)},className:"flex h-full min-h-[300px] w-full\n                        cursor-pointer flex-col items-center justify-center sm:min-h-[400px]\n                        ".concat(D>=1&&"opacity-0"),children:[(0,s.jsx)("div",{className:"text-lg font-bold",children:"Step 1"}),(0,s.jsx)(g.default,{src:k,alt:"scan",height:60,width:60,className:"my-2"}),(0,s.jsx)("div",{className:"my-2 px-4 text-lg font-bold",children:H("Upload original image")})]})]})}),(0,s.jsxs)("div",{className:"relative flex h-full min-h-[200px] w-full flex-col items-center justify-center gap-6 rounded-xl sm:mb-[100px] sm:min-h-[400px] sm:border-1 ",children:[(0,s.jsx)("div",{className:"w-full text-start sm:text-center",children:(0,s.jsx)("div",{className:"mt-0 w-full px-4 text-center text-lg font-bold sm:mt-4",children:H("Step 2 Choose a model")})}),(0,s.jsx)("div",{className:"flex w-full flex-wrap justify-between gap-0 sm:h-[60%] sm:justify-center sm:gap-0 sm:px-6 ",children:[{id:"Anime Basic",model:"Female: Anime Basic",src:N},{id:"Anime Realistic",model:"Female: Anime Realistic",src:P},{id:"Anime Detailed",model:"Female: Anime Detailed",src:_},{id:"Anime HD",model:"Female: Anime HD",src:E}].map(e=>(0,s.jsxs)("div",{className:"flex h-[90%] w-[25%] flex-col items-center p-[2.5%] sm:h-[45%] sm:w-[45%]",onClick:()=>{ec(e.model)},children:[(0,s.jsx)(g.default,{src:e.src,height:100,width:100,alt:"",className:"".concat(M===e.model?"border-theme":"border-transparent","  h-[100px] w-[100px] rounded-sm border-2 object-contain sm:rounded-2xl ")}),(0,s.jsx)("div",{className:"".concat(M===e.model?"text-theme":"text-white"," text-xs sm:text-sm"),children:e.id})]},e.id))})]}),(0,s.jsxs)("div",{className:" flex h-full w-full flex-col items-center rounded-xl  sm:min-h-[400px]",children:[(0,s.jsxs)("div",{className:"relative mx-6 mb-6 hidden h-full min-h-[400px] w-[calc(100%-48px)] flex-col items-center justify-center rounded-xl border-1 sm:flex",children:[(0,s.jsxs)("div",{className:" flex h-full min-h-[400px] w-full flex-col items-center justify-center ".concat(D<=2?"opacity-100":"opacity-0"),children:[(0,s.jsx)(g.default,{height:60,width:60,alt:"",src:R}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)("div",{className:"text-xl font-bold",children:H("Click Generate Now!")})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2 text-base",children:[(0,s.jsxs)("div",{className:" font-bold",children:[" ",H("One Generation")," = "]}),(0,s.jsx)("div",{children:(0,s.jsx)("img",{className:"h-5 w-5",src:"/gemicon/basic.png"})}),(0,s.jsx)("div",{children:"50"}),(0,s.jsx)("div",{children:"Gems"})]}),(0,s.jsx)("div",{className:"my-2 text-center text-sm ",children:H("Files supported: jpg png heic")})]})]}),O&&(0,s.jsx)(g.default,{src:l||"",height:400,width:300,alt:"",className:"absolute left-0 top-0 flex h-full w-full flex-col items-center justify-center object-contain",onClick:eo})]}),(0,s.jsxs)("div",{className:"mb-[10px] flex flex-row-reverse justify-center gap-6 lg:h-[40px]",children:[(0,s.jsx)(c.A,{className:"h-[30px] w-[106px] animate-outin rounded-full bg-theme px-[6px] py-[6px] text-center text-[14px] font-bold text-white ".concat(D<=1?"opacity-45":""," py-4 sm:w-[150px]"),"aria-label":"submit task",onClick:ed,disabled:D<=1,children:H("Generate Now")}),(0,s.jsx)("button",{className:"h-[30px] w-[106px] min-w-[48px] rounded-[15px] border-1 border-solid border-theme px-1 text-center text-[14px] font-bold text-theme shadow-md shadow-theme/40 transition-all disabled:opacity-50",onClick:()=>{t(null),I(null),C(null),F(0),U(!1),S(!1)},children:H("Reset")})]})]})]})}),en&&(0,s.jsx)(d.R,{isOpen:!0,defaultOpen:!0,onOpenChange:ea,hideCloseButton:!0,size:"sm",isDismissable:!1,children:(0,s.jsx)(o.A,{children:(0,s.jsxs)("div",{className:"mx-4 my-4",children:[(0,s.jsxs)(u.k,{className:"flex flex-col items-center justify-center gap-5",children:[D>=2?H("Processing"):H("Uploading"),(0,s.jsx)(m.c,{color:"danger"})]}),(0,s.jsx)(h.I,{className:"my-3",children:(0,s.jsx)("p",{children:D>=2?H("Magic algorithm in progress!"):H("Please wait")})})]})})}),O&&K&&(0,s.jsx)(d.R,{backdrop:"blur",isOpen:$,onOpenChange:et,motionProps:{variants:{enter:{y:0,opacity:1,transition:{duration:.3,ease:"easeOut"}},exit:{y:-20,opacity:0,transition:{duration:.2,ease:"easeIn"}}}},children:(0,s.jsx)(o.A,{children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.I,{className:"mt-7 ",children:(0,s.jsx)("div",{className:"flex w-full justify-center",children:(0,s.jsx)(g.default,{src:l||"",height:400,width:300,alt:"",loading:"eager"})})}),(0,s.jsxs)(x.R,{children:[(0,s.jsx)(c.A,{color:"danger",variant:"light",onPress:e,children:H("Close")}),(0,s.jsx)(c.A,{color:"primary",onPress:eo,children:H("Download")})]})]})})}),(0,s.jsx)(d.R,{isOpen:W,onOpenChange:Q,children:(0,s.jsx)(o.A,{children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.k,{className:"flex flex-col gap-1",children:T}),(0,s.jsxs)(x.R,{children:[(0,s.jsx)(c.A,{color:"danger",variant:"light",onPress:()=>{e()},children:H("Close")}),(0,s.jsx)(c.A,{color:"default",onPress:()=>{e(),q.push(V)},children:H("Ok")})]})]})})})]})}},23533:function(e,t,l){"use strict";l.d(t,{O1:function(){return n},Qb:function(){return i},tg:function(){return r}});var s=l(44750),a=l.n(s);function n(e){let t=e||10,l="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",s=l.length,a="";for(let e=0;e<t;e++)a+=l.charAt(Math.floor(Math.random()*s));return a}function i(e,t){let l,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,n=0,i=!1,r=e=>{console.log("停止",n),!e&&t&&t(),i=!0,clearTimeout(l)},c=async()=>{try{++n,await e(r)}catch(e){r(),console.error("轮询出错：",e)}if(n>=a&&r(),!i)return l=setTimeout(c,s)};return{start:async()=>{i=!1,await c()},stop:r}}function r(e){if(e){if(e.startsWith("https://")){let t=new XMLHttpRequest,l=new URL(window.location.href),s=function(e){let t=e.match(/(\.[a-zA-Z0-9]+)$/);return t?t[1]:null}(e);console.log("ext",s),l.pathname="/download"+new URL(e).pathname,t.open("get",l.toString(),!0),t.responseType="blob",t.send(),t.onload=function(e){let t=new FileReader;t.readAsDataURL(a()(e,"target.response")),t.onload=function(e){var t;let l=document.createElement("a");l.href=null===(t=e.target)||void 0===t?void 0:t.result,l.download=crypto.randomUUID()+s,document.body.appendChild(l),l.click(),document.body.removeChild(l)}}}else{let t=document.createElement("a");t.href=e,t.download=crypto.randomUUID()+".jpeg",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}}},93902:function(e,t,l){"use strict";l.d(t,{FD:function(){return d},ZP:function(){return o}});var s=l(2265),a=l(32153),n=l(15281),i=l(57525);let r=(0,a.cn)({key:"gemscount",default:{PG_GEM_EPHEMERAL:0,PG_GEM_PERMANENT:0}}),c=(0,a.cn)({key:"privilege",default:{last_purchase_amount:0,level:0,level_name:"basic",user_id:void 0}});function d(){let[e,t]=(0,a.FV)(r),[l,d]=(0,a.FV)(c),{userInfo:o}=(0,n.useUserInfo)();return(0,s.useEffect)(()=>{if(!o||!o.userId)return;let e=!1;return i.Z.checkUserGem(o.userId).then(e=>{t({PG_GEM_EPHEMERAL:e.PG_GEM_EPHEMERAL||0,PG_GEM_PERMANENT:e.PG_GEM_PERMANENT||0})}),i.Z.getUserInfo(o.userId).then(t=>{let l="basic",s=0;t.last_purchase_amount>20&&(l="advanced",s=1),t.last_purchase_amount>40&&(l="master",s=2),t.last_purchase_amount>60&&(l="artist",s=3),t.last_purchase_amount>130&&(l="ultimate",s=4),e||d({last_purchase_amount:t.last_purchase_amount,level:s,level_name:l,user_id:t.user_id})}),()=>{e=!0}},[o]),{gemData:e}}function o(){let[e,t]=(0,a.FV)(r),[l,d]=(0,a.FV)(c),{userInfo:o}=(0,n.useUserInfo)();return{gemData:e,refreshGemData:(0,s.useCallback)(()=>{o&&o.userId&&i.Z.checkUserGem(o.userId).then(e=>{t({PG_GEM_EPHEMERAL:e.PG_GEM_EPHEMERAL||0,PG_GEM_PERMANENT:e.PG_GEM_PERMANENT||0})})},[t,o]),privilege:l}}},64840:function(e,t,l){"use strict";l.d(t,{b7:function(){return a}});var s=l(95510);let a=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.7,a=document.createElement("input");a.type="file",a.accept="image/*",a.onchange=async()=>{if(t(!0),!a.files){t(!1);return}let n=a.files[0];try{let e=await (0,s.Z)(n,{maxSizeMB:l,maxWidthOrHeight:1280,useWebWorker:!0});n=new File([e],"xxx",{type:n.type,lastModified:Date.now()})}catch(e){console.error(e)}let i=new FileReader;i.onload=()=>{let l=i.result,s=new Image;s.src=l,s.onload=()=>{e(l,{width:s.width,height:s.height}),t(!1)}},i.readAsDataURL(n)},a.click()}}},function(e){e.O(0,[691,7699,7802,680,2542,2031,703,4750,7010,5871,7610,2971,1726,1744],function(){return e(e.s=79965)}),_N_E=e.O()}]);